Week 4: Maven-creation 
Open Eclipse, click on file->click new->maven project->filter->quickstart(java)org.apache.maven.archetypes,webapp(web application)->org.apache.maven.archetypes
put some artifactid and then next, 
click on project->run as->maven build->goals-> clean install test
then run as java application or run on server 
right click->show in local terminal->git bash 
-----------------------------------------------------
Question: Create a Docker Compose setup with a Node.js app and MongoDB.

app.js
const express = require('express');
const { MongoClient } = require('mongodb');
const app = express();
const port = 3000;

const uri = "mongodb://mongo:27017/testdb";

app.get('/', async (req, res) => {
    try {
        const client = new MongoClient(uri);
        await client.connect();

        const db = client.db("testdb");
        const count = await db.collection("items").countDocuments();

        res.send(`Connected to MongoDB. Documents count: ${count}`);
        await client.close();
    } catch (err) {
        res.send("Error connecting to MongoDB: " + err);
    }
});

app.listen(port, () => {
    console.log(`Server running on port ${port}`);
});

dockerfile
FROM node:18
WORKDIR /app
COPY package*.json ./
RUN npm install
COPY . .
EXPOSE 3000
CMD ["node", "app.js"]

docker-compose.yml
version: "3.9"
services:
  app:
    build: .
    container_name: node-app
    ports:
      - "3000:3000"
    depends_on:
      - mongo
    environment:
      - MONGO_URL=mongodb://mongo:27017/testdb
  mongo:
    image: mongo:6
    container_name: mongo-db
    restart: always
    volumes:
      - mongo_data:/data/db
    ports:
      - "27017:27017"
volumes:
  mongo_data:


npm init -y
npm install express mongodb
docker-compose down
docker-compose up --build
----------------------------------------------------------------------------------------------------------------------------------------------
Question: Write the Docker file and create the image and access the image in localhost

app.js
const http = require('http');
const server = http.createServer((req, res) => {
  res.end("Docker image is working on localhost!");
});
server.listen(3000, () => {
  console.log("Server running on port 3000");
});

dockerfile
FROM node:18
WORKDIR /app
COPY package*.json ./
COPY app.js ./
RUN npm install
EXPOSE 3000
CMD ["node", "app.js"]

commands: 
npm init -y
docker build -t my-node-app .
docker run -d -p 3000:3000 --name mycontainer my-node-app
http://localhost:3000
docker stop mycontainer
(optional..................)
docker login
docker tag my-maven-app your-dockerhub-username/my-node-app:v1

docker push your-dockerhub-username/my-node-app:v1

docker search your-dockerhub-username/my-node-app
-----------------------------------------------------------------------------------------------------------------------------------------------------------------
‚úÖ WEEK 8 ‚Äî Jenkins Freestyle Jobs (VERY BEGINNER VERSION)
Goal: Learn how to run Java & Web projects automatically using Jenkins.
________________________________________
‚≠ê PART 1 ‚Äî Install & Open Jenkins
1.	Open your browser.
2.	Type: http://localhost:8080
You will see the Jenkins dashboard.
________________________________________
‚≠ê PART 2 ‚Äî Create Maven Java Build Job (MavenJava_Build)
1Ô∏è‚É£ Click ‚ÄúNew Item‚Äù
‚Ä¢	Left side ‚Üí first option.
2Ô∏è‚É£ Give a name
Example:
MavenJava_Build
Select:
Freestyle Project
Click OK.
________________________________________
3Ô∏è‚É£ Fill Project Details
Inside Configuration page:
Description:
Java Build demo
________________________________________
4Ô∏è‚É£ Add GitHub Code
Scroll to:
‚úî Source Code Management ‚Üí Choose Git
You will see a box:
Repository URL
Paste your Maven Java GitHub link here (example):
https://github.com/someone/maven-java-demo.git
________________________________________
5Ô∏è‚É£ Build Steps (Very Important)
Scroll to Build section ‚Üí click:
‚ñ∂ Add Build Step ‚Üí Invoke top-level Maven targets
You will now add 2 steps:
STEP A
‚Ä¢	Maven version: select your configured Maven (example: MAVEN_HOME)
‚Ä¢	Goals: clean
STEP B (again click ‚ÄúAdd Build Step‚Äù)
‚Ä¢	Goals: install
________________________________________
6Ô∏è‚É£ Post-Build Actions
Scroll down ‚Üí Click:
‚ñ∂ Add post-build action ‚Üí Archive the artifacts
Files to archive: **/*
Then again:
‚ñ∂ Add post-build action ‚Üí Build other projects
Enter: MavenJava_Test
Choose:
‚Ä¢	Trigger only if build is stable
7Ô∏è‚É£ Save the job
Click Save at bottom.
________________________________________
‚≠ê PART 3 ‚Äî Create MavenJava_Test Job
1Ô∏è‚É£ Click ‚ÄúNew Item‚Äù
Name: MavenJava_Test
Select Freestyle ‚Üí OK.
________________________________________
2Ô∏è‚É£ Description
Test demo
________________________________________
3Ô∏è‚É£ Build Environment
Scroll ‚Üí tick:
‚úî Delete workspace before build starts
Why?
It removes old files so test always runs fresh.
________________________________________
4Ô∏è‚É£ Copy the build output from previous job
Build Steps ‚Üí Add Build Step ‚Üí Copy artifacts from another project.
Fill:
‚Ä¢	Project name ‚Üí MavenJava_Build
‚Ä¢	Build ‚Üí Stable build only
‚Ä¢	Artifacts to copy: **/*
________________________________________
5Ô∏è‚É£ Add Test Step
Add Build Step ‚Üí Invoke top-level Maven targets
‚Ä¢	Goals: test
________________________________________
6Ô∏è‚É£ Archive test results
Add Post Build Action ‚Üí Archive artifacts
Files: **/*
Click Save
________________________________________
‚≠ê PART 4 ‚Äî Create Pipeline View
Steps:
1.	On Jenkins dashboard, click ‚Äú+‚Äù beside ‚ÄúAll‚Äù
2.	Name: MavenJava_Pipeline
3.	Select: Build Pipeline View
4.	Pipeline flow:
o	Initial job ‚Üí MavenJava_Build
5.	Save.
________________________________________
‚≠ê PART 5 ‚Äî Run
1.	Open pipeline view
2.	Click ‚ÄúRun‚Äù
3.	Green = success
4.	Click boxes ‚Üí open console
________________________________________
‚ú® Maven Java part DONE!
________________________________________
‚≠ê PART 6 ‚Äî Repeat SAME for Maven Web Project
You will create 3 jobs:
1.	MavenWeb_Build
2.	MavenWeb_Test
3.	MavenWeb_Deploy
And pipeline.
The steps are exactly same as Java ‚Äî except the deploy job:
In MavenWeb_Deploy:
‚Ä¢	Copy artifacts from test job :stable build only : artifacts */
‚Ä¢	Add Post-build Action ‚Üí Deploy WAR/EAR to container
‚Ä¢	WAR file: **/*.war 
‚Ä¢       context path:webpath
‚Ä¢	Add Tomcat 9 remote server
o	username: admin
o	password: 1234	
o	URL: http://localhost:8085/	
Done.

web_pipeline_view
pipeline flow: based on upstream/down.....
inital job:MavenWeb_Build
run pipeline.
________________________________________
‚úÖ WEEK 9 ‚Äî Scripted Pipeline (BEGINNER VERSION)
Goal: Create ONE Jenkins job using Pipeline script.
________________________________________
1Ô∏è‚É£ Click ‚ÄúNew Item‚Äù
Name: ScriptedPipeline
Choose: Pipeline
Click OK.
________________________________________
2Ô∏è‚É£ Scroll down to Pipeline section
Under Definition, select:
Pipeline script
Build triggers: Poll SCM
________________________________________
3Ô∏è‚É£ Paste the script

pipeline {
agent any
   tools{
        maven 'MAVEN-HOME'
    }
    stages {
        stage('git repo & clean') {
            steps {
                bat "git clone <provide your github link>"
                bat "mvn clean -f mavenjava"
            }
        }
        stage('install') {
            steps {
                bat "mvn install -f mavenjava"
            }
        }
        stage('test') {
            steps {
                bat "mvn test -f mavenjava"
            }
        }
        stage('package') {
            steps {
                bat "mvn package -f mavenjava"
            }
        }
    }
}

Change:
git clone <paste your GitHub URL>
And change ‚Äúmavenjava‚Äù to your folder name if needed.
________________________________________
4Ô∏è‚É£ Save
________________________________________
5Ô∏è‚É£ Run
Click Build now.
Take screenshots of:
‚Ä¢	Build stages
‚Ä¢	Console output
Done.
________________________________________
‚úÖ WEEK 10 ‚Äî Minikube, Kubernetes, Nagios, AWS (BEGINNER VERSION)
________________________________________
‚≠ê PART 1 ‚Äî Minikube
1Ô∏è‚É£ Start Minikube
Open CMD or PowerShell:
minikube start
2Ô∏è‚É£ Create an nginx server
kubectl create deployment mynginx --image=nginx
Check:
kubectl get pods
3Ô∏è‚É£ Expose the deployment
kubectl expose deployment mynginx --type=NodePort --port=80 --target-port=80
4Ô∏è‚É£ Scale to 4 pods
kubectl scale deployment mynginx --replicas=4
->Port forwarding: kubectl port-forward svc/mynginx 8081:80
8081 can be replaced by any
->Kubernets dashboard 
Minikube dashboard
->Stopping
kubectl delete deployment mynginx
kubectl delete service mynginx
minikube stop
________________________________________
‚≠ê PART 2 ‚Äî Nagios in Docker
1Ô∏è‚É£ Pull image
docker pull jasonrivers/nagios:latest
2Ô∏è‚É£ Run Nagios
docker run --name nagiosdemo -p 8888:80 jasonrivers/nagios:latest
3Ô∏è‚É£ Open browser
Go to:
http://localhost:8888
Login:
‚Ä¢	username: nagiosadmin
‚Ä¢	password: nagios
stopping: docker stop nagiosdemo	
________________________________________
‚úÖ WEEK 11 ‚Äî GitHub Webhook + Jenkins Email (SUPER SIMPLE)
________________________________________
‚≠ê PART 1 ‚Äî Install ngrok
Run in CMD:
ngrok http 8080
You will see:
https://abc123.ngrok.io (just for example)
Copy this.
________________________________________
‚≠ê PART 2 ‚Äî Add Webhook in GitHub
1.	Open your GitHub repo ‚Üí Settings ‚Üí Webhooks
2.	Click Add Webhook
3.	Payload URL:
https://abc123.ngrok.io/github-webhook/ (make sure to add /github-webhook/ at the end of your ngrok url)
4.	Content type: application/json
5.	Events: ‚úî Just the push event
6.	Add webhook
________________________________________
‚≠ê PART 3 ‚Äî Configure Jenkins job
Open your job ‚Üí Configure ‚Üí Build Triggers
‚úî Tick: GitHub hook trigger for GITScm polling
Save.
________________________________________
‚≠ê PART 4 ‚Äî Test webhook
1.	Make any change to your GitHub project
2.	Push the code
3.	Jenkins WILL automatically start building
DONE.
________________________________________
‚≠ê PART 5 ‚Äî Email Notification Setup (Beginner version)
Step 1 ‚Äî Setup Gmail App Password
1.	Open Google Account ‚Üí Security
2.	Turn on 2-step verification
3.	Create App Password ‚Üí choose ‚ÄúOther‚Äù
4.	Copy the 16-character password
________________________________________
Step 2 ‚Äî Jenkins Email settings
In Jenkins:
‚Ä¢	Manage Jenkins ‚Üí Configure System
‚Ä¢	Scroll to ‚ÄúE-mail Notification‚Äù
‚Ä¢	Fill:
SMTP Server ‚Üí smtp.gmail.com
Use SMTP Auth ‚Üí ‚úî
Username ‚Üí your Gmail
Password ‚Üí (your app password) (16-character password that you got)
Use SSL ‚Üí ‚úî
Port ‚Üí 465
Click Send test email
If received ‚Üí success.
________________________________________
‚≠ê PART 6 ‚Äî Add email to Job
Open your job ‚Üí Configure ‚Üí Post-build actions:
Add:
Editable Email Notification
Add recipients ‚Üí Save ‚Üí Build.
DONE.
________________________________________
‚úÖ WEEK 12 ‚Äî Deploying App in AWS EC2 Using Docker
________________________________________
‚≠ê PART 1 ‚Äî Create EC2 instance
1.	AWS ‚Üí Start Lab and click on the green-dot ‚Üí EC2 ‚Üí Launch Instance
2.	Name: ubuntu
3.	AMI: Ubuntu Server 22.04 LTS (Free tier)
4.	Instance type: t2.micro
5.	Create new key pair ‚Üí download .pem file
6.	Security group:
‚úî SSH (22)
‚úî HTTP (80)
7.	Launch instance.
________________________________________
‚≠ê PART 2 ‚Äî Connect to EC2
Go to instance ‚Üí Click Connect ‚Üí SSH tab
Copy:
ssh -i "your-key.pem" ubuntu@<your-public-ip>

create a folder named aws and navigate to it 
put ur pem file in aws
Paste ur ssh into PowerShell.
You are now inside your remote Ubuntu machine.
________________________________________
‚≠ê PART 3 ‚Äî Install 
Run:
sudo apt update
sudo apt-get install docker.io
sudo apt install git
sudo apt install nano
________________________________________
Create a html file and push into git or what ever is given 
<!doctype html>
<html>
<head>
    <meta charset="utf-8"/>
    <title>My Example Webserver</title>
</head>
<body>
    <h1>Hello from EC2 + Docker!</h1>
    <p>Hosted on nginx container.</p>
</body>
</html>

‚≠ê PART 4 ‚Äî Clone your project
git clone <your GitHub link>
cd <project folder>
________________________________________
‚≠ê PART 5 ‚Äî Create Dockerfile
Run:
nano Dockerfile
Paste:
FROM nginx:alpine
COPY . /usr/share/nginx/html
(For maven WEB project)-> docker file code 
FROM tomcat:9-jdk11
COPY target/*.war/usr/local/tomcat/webapps
Save:
‚Ä¢	CTRL + O ‚Üí Enter
‚Ä¢	CTRL + X
________________________________________
‚≠ê PART 6 ‚Äî Build Docker image
sudo docker build -t mywebapp .
________________________________________
‚≠ê PART 7 ‚Äî Run the container
sudo docker run -d -p 80:80 mywebapp
________________________________________
‚≠ê PART 8 ‚Äî Open your website
Copy your EC2 public IP
Paste in browser ‚Üí Your website appears üéâ
->Stopping 
sudo docker ps -> gives container id 
sudo docker stop <container id>
